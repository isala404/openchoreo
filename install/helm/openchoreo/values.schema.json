{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OpenChoreo Secure Core Values",
  "type": "object",
  "properties": {
    "global": {
      "type": "object",
      "properties": {
        "clusterName": {
          "type": "string",
          "default": "openchoreo"
        }
      }
    },
    "fullnameOverride": {
      "type": "string",
      "default": "openchoreo"
    },
    "podSecurityStandards": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "enforce": {
          "type": "string",
          "enum": ["privileged", "baseline", "restricted"],
          "default": "restricted"
        },
        "audit": {
          "type": "string",
          "enum": ["privileged", "baseline", "restricted"],
          "default": "restricted"
        },
        "warn": {
          "type": "string",
          "enum": ["privileged", "baseline", "restricted"],
          "default": "restricted"
        }
      }
    },
    "controllerManager": {
      "type": "object",
      "properties": {
        "replicas": {
          "type": "integer",
          "minimum": 0,
          "default": 1
        },
        "image": {
          "type": "object",
          "properties": {
            "repository": {
              "type": "string",
              "default": "ghcr.io/openchoreo/controller"
            },
            "tag": {
              "type": "string",
              "default": "latest-dev"
            },
            "pullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "default": "Always"
            }
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "1000m"
                },
                "memory": {
                  "type": "string",
                  "default": "1Gi"
                }
              }
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "200m"
                },
                "memory": {
                  "type": "string",
                  "default": "256Mi"
                }
              }
            }
          }
        },
        "serviceAccount": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": true
            },
            "annotations": {
              "type": "object",
              "default": {}
            }
          }
        },
        "priorityClass": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": false
            },
            "name": {
              "type": "string",
              "default": "openchoreo-controller-manager"
            },
            "value": {
              "type": "integer",
              "default": 1000000
            }
          }
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer"],
              "default": "ClusterIP"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "default": 8080
            },
            "nodePort": {
              "type": ["integer", "null"],
              "default": null
            }
          }
        },
        "metrics": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "serviceMonitor": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "namespace": {
                  "type": "string",
                  "default": "monitoring"
                },
                "interval": {
                  "type": "string",
                  "default": "30s"
                },
                "scrapeTimeout": {
                  "type": "string",
                  "default": "10s"
                },
                "labels": {
                  "type": "object",
                  "properties": {
                    "prometheus": {
                      "type": "string",
                      "default": "kube-prometheus"
                    }
                  }
                },
                "relabelings": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "default": []
                }
              }
            }
          }
        },
        "podDisruptionBudget": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minAvailable": {
              "type": "integer",
              "default": 1
            }
          }
        },
        "networkPolicy": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "egress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            }
          }
        },
        "autoscaling": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minReplicas": {
              "type": "integer",
              "default": 1
            },
            "maxReplicas": {
              "type": "integer",
              "default": 3
            },
            "targetCPUUtilizationPercentage": {
              "type": "integer",
              "default": 70
            },
            "targetMemoryUtilizationPercentage": {
              "type": "integer",
              "default": 80
            },
            "behavior": {
              "type": "object",
              "properties": {
                "scaleDown": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 300
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 50,
                          "periodSeconds": 60
                        }
                      ]
                    }
                  }
                },
                "scaleUp": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 0
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 100,
                          "periodSeconds": 15
                        },
                        {
                          "type": "Pods",
                          "value": 4,
                          "periodSeconds": 60
                        }
                      ]
                    },
                    "selectPolicy": {
                      "type": "string",
                      "enum": ["Min", "Max", "Disabled"],
                      "default": "Max"
                    }
                  }
                }
              }
            }
          }
        },
        "topologySpreadConstraints": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": [
            {
              "maxSkew": 1,
              "topologyKey": "topology.kubernetes.io/zone",
              "whenUnsatisfiable": "ScheduleAnyway",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "controller-manager"
                }
              }
            },
            {
              "maxSkew": 1,
              "topologyKey": "kubernetes.io/hostname",
              "whenUnsatisfiable": "DoNotSchedule",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "controller-manager"
                }
              }
            }
          ]
        },
        "nodeSelector": {
          "type": "object",
          "default": {}
        },
        "tolerations": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": []
        },
        "affinity": {
          "type": "object",
          "default": {}
        }
      }
    },
    "openchoreoApi": {
      "type": "object",
      "properties": {
        "replicas": {
          "type": "integer",
          "minimum": 0,
          "default": 1
        },
        "image": {
          "type": "object",
          "properties": {
            "repository": {
              "type": "string",
              "default": "ghcr.io/openchoreo/api"
            },
            "tag": {
              "type": "string",
              "default": "latest"
            },
            "pullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "default": "IfNotPresent"
            }
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "1000m"
                },
                "memory": {
                  "type": "string",
                  "default": "1Gi"
                }
              }
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "200m"
                },
                "memory": {
                  "type": "string",
                  "default": "256Mi"
                }
              }
            }
          }
        },
        "serviceAccount": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": true
            },
            "annotations": {
              "type": "object",
              "default": {}
            }
          }
        },
        "priorityClass": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": false
            },
            "name": {
              "type": "string",
              "default": "openchoreo-api"
            },
            "value": {
              "type": "integer",
              "default": 900000
            }
          }
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer"],
              "default": "ClusterIP"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "default": 8080
            },
            "nodePort": {
              "type": ["integer", "null"],
              "default": null
            }
          }
        },
        "metrics": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "serviceMonitor": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "namespace": {
                  "type": "string",
                  "default": "monitoring"
                },
                "interval": {
                  "type": "string",
                  "default": "30s"
                },
                "scrapeTimeout": {
                  "type": "string",
                  "default": "10s"
                },
                "labels": {
                  "type": "object",
                  "properties": {
                    "prometheus": {
                      "type": "string",
                      "default": "kube-prometheus"
                    }
                  }
                },
                "relabelings": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "default": []
                }
              }
            }
          }
        },
        "autoscaling": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minReplicas": {
              "type": "integer",
              "default": 1
            },
            "maxReplicas": {
              "type": "integer",
              "default": 3
            },
            "targetCPUUtilizationPercentage": {
              "type": "integer",
              "default": 70
            },
            "targetMemoryUtilizationPercentage": {
              "type": "integer",
              "default": 80
            },
            "behavior": {
              "type": "object",
              "properties": {
                "scaleDown": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 300
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 50,
                          "periodSeconds": 60
                        }
                      ]
                    }
                  }
                },
                "scaleUp": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 0
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 100,
                          "periodSeconds": 15
                        },
                        {
                          "type": "Pods",
                          "value": 4,
                          "periodSeconds": 60
                        }
                      ]
                    },
                    "selectPolicy": {
                      "type": "string",
                      "enum": ["Min", "Max", "Disabled"],
                      "default": "Max"
                    }
                  }
                }
              }
            }
          }
        },
        "podDisruptionBudget": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minAvailable": {
              "type": "integer",
              "default": 1
            }
          }
        },
        "networkPolicy": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "egress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            }
          }
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingressClassName": {
              "type": "string",
              "default": ""
            },
            "annotations": {
              "type": "object",
              "default": {}
            },
            "hosts": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "tls": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            }
          }
        },
        "topologySpreadConstraints": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": [
            {
              "maxSkew": 1,
              "topologyKey": "topology.kubernetes.io/zone",
              "whenUnsatisfiable": "ScheduleAnyway",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "api-server"
                }
              }
            },
            {
              "maxSkew": 1,
              "topologyKey": "kubernetes.io/hostname",
              "whenUnsatisfiable": "DoNotSchedule",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "api-server"
                }
              }
            }
          ]
        },
        "nodeSelector": {
          "type": "object",
          "default": {}
        },
        "tolerations": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": []
        },
        "affinity": {
          "type": "object",
          "default": {}
        }
      }
    },
    "backstage": {
      "type": "object",
      "properties": {
        "replicas": {
          "type": "integer",
          "minimum": 0,
          "default": 1
        },
        "image": {
          "type": "object",
          "properties": {
            "repository": {
              "type": "string",
              "default": "ghcr.io/openchoreo/ui"
            },
            "tag": {
              "type": "string",
              "default": "latest"
            },
            "pullPolicy": {
              "type": "string",
              "enum": ["Always", "IfNotPresent", "Never"],
              "default": "IfNotPresent"
            }
          }
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": ["ClusterIP", "NodePort", "LoadBalancer"],
              "default": "ClusterIP"
            },
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535,
              "default": 7007
            },
            "nodePort": {
              "type": ["integer", "null"],
              "default": null
            }
          }
        },
        "resources": {
          "type": "object",
          "properties": {
            "limits": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "2000m"
                },
                "memory": {
                  "type": "string",
                  "default": "2Gi"
                }
              }
            },
            "requests": {
              "type": "object",
              "properties": {
                "cpu": {
                  "type": "string",
                  "default": "200m"
                },
                "memory": {
                  "type": "string",
                  "default": "256Mi"
                }
              }
            }
          }
        },
        "serviceAccount": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": true
            },
            "annotations": {
              "type": "object",
              "default": {}
            }
          }
        },
        "priorityClass": {
          "type": "object",
          "properties": {
            "create": {
              "type": "boolean",
              "default": false
            },
            "name": {
              "type": "string",
              "default": "openchoreo-backstage"
            },
            "value": {
              "type": "integer",
              "default": 800000
            }
          }
        },
        "backendSecret": {
          "type": "string",
          "default": ""
        },
        "openchoreoApi": {
          "type": "object",
          "properties": {
            "url": {
              "type": "string",
              "default": ""
            }
          }
        },
        "env": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": [
            {
              "name": "NODE_ENV",
              "value": "production"
            },
            {
              "name": "LOG_LEVEL",
              "value": "info"
            },
            {
              "name": "PORT",
              "value": "7007"
            }
          ]
        },
        "metrics": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true
            },
            "serviceMonitor": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "namespace": {
                  "type": "string",
                  "default": "monitoring"
                },
                "interval": {
                  "type": "string",
                  "default": "30s"
                },
                "scrapeTimeout": {
                  "type": "string",
                  "default": "10s"
                },
                "labels": {
                  "type": "object",
                  "properties": {
                    "prometheus": {
                      "type": "string",
                      "default": "kube-prometheus"
                    }
                  }
                },
                "relabelings": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "default": []
                }
              }
            }
          }
        },
        "autoscaling": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minReplicas": {
              "type": "integer",
              "default": 1
            },
            "maxReplicas": {
              "type": "integer",
              "default": 3
            },
            "targetCPUUtilizationPercentage": {
              "type": "integer",
              "default": 70
            },
            "targetMemoryUtilizationPercentage": {
              "type": "integer",
              "default": 80
            },
            "behavior": {
              "type": "object",
              "properties": {
                "scaleDown": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 300
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 50,
                          "periodSeconds": 60
                        }
                      ]
                    }
                  }
                },
                "scaleUp": {
                  "type": "object",
                  "properties": {
                    "stabilizationWindowSeconds": {
                      "type": "integer",
                      "default": 0
                    },
                    "policies": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "enum": ["Percent", "Pods"]
                          },
                          "value": {
                            "type": "integer"
                          },
                          "periodSeconds": {
                            "type": "integer"
                          }
                        }
                      },
                      "default": [
                        {
                          "type": "Percent",
                          "value": 100,
                          "periodSeconds": 15
                        },
                        {
                          "type": "Pods",
                          "value": 4,
                          "periodSeconds": 60
                        }
                      ]
                    },
                    "selectPolicy": {
                      "type": "string",
                      "enum": ["Min", "Max", "Disabled"],
                      "default": "Max"
                    }
                  }
                }
              }
            }
          }
        },
        "podDisruptionBudget": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "minAvailable": {
              "type": "integer",
              "default": 1
            }
          }
        },
        "networkPolicy": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "egress": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            }
          }
        },
        "ingress": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ingressClassName": {
              "type": "string",
              "default": ""
            },
            "annotations": {
              "type": "object",
              "default": {}
            },
            "hosts": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "tls": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            }
          }
        },
        "topologySpreadConstraints": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": [
            {
              "maxSkew": 1,
              "topologyKey": "topology.kubernetes.io/zone",
              "whenUnsatisfiable": "ScheduleAnyway",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "backstage"
                }
              }
            },
            {
              "maxSkew": 1,
              "topologyKey": "kubernetes.io/hostname",
              "whenUnsatisfiable": "DoNotSchedule",
              "labelSelector": {
                "matchLabels": {
                  "app.kubernetes.io/name": "openchoreo",
                  "app.kubernetes.io/component": "backstage"
                }
              }
            }
          ]
        },
        "nodeSelector": {
          "type": "object",
          "default": {}
        },
        "tolerations": {
          "type": "array",
          "items": {
            "type": "object"
          },
          "default": []
        },
        "affinity": {
          "type": "object",
          "default": {}
        }
      }
    }
  }
}
